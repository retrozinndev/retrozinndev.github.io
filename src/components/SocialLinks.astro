---
// Discord User Widget by vendicated (https://vendicated.dev/)
import LinkButton from "./LinkButton.astro";
---

<iframe id="discordEmbed"
    title="Discord"
    width={340}
    height={120}
    sandbox="allow-scripts"
    style="display: none"
 />

<script>
    import { getTheme } from "../scripts/theme";

    const discordEmbed = document.getElementById("discordEmbed") as HTMLIFrameElement;
    discordEmbed.src = `https://widgets.vendicated.dev/user?id=568589231954591749&theme=${getTheme()}&banner=true&full-banner=false&rounded-corners=false&discord-icon=true&badges=false&guess-nitro=false`;
    discordEmbed.style.display = "initial";

    new MutationObserver(mutations => {
        mutations.forEach((mutation) => {
            if(mutation.type !== "attributes" && mutation.attributeName !== "class")
                return;

            discordEmbed.contentWindow?.postMessage({
                command: "setTheme",
                theme: getTheme() ?? "dark"
            }, "*")
        });
    }).observe(document.body as HTMLBodyElement, { attributes: true });
</script>

<table class="stylish-table">
    <tr>
        <td><i class="nf nf-fa-github"></i> GitHub</td>
        <td><LinkButton href="https://github.com/retrozinndev">retrozinndev</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-fa-gitlab"></i> GitLab</td>
        <td><LinkButton href="https://gitlab.com/retrozinndev">retrozinndev</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-linux-codeberg" /> CodeBerg</td>
        <td><LinkButton href="https://codeberg.org/retrozinndev">retrozinndev</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-dev-twitter" /> X / Twitter</td>
        <td><LinkButton href="https://x.com/retrozinndev">@retrozinndev</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-md-code_brackets"></i> Matrix</td>
        <td><LinkButton href="https://matrix.to/#/@retrozinndev:matrix.org">@retrozinndev:matrix.org</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-fa-reddit"></i> Reddit</td>
        <td><LinkButton href="https://www.reddit.com/user/Much_Clue7037">Much_Clue7037</LinkButton></td>
    </tr>
    <tr>
        <td><i class="nf nf-oct-mail"></i> Mail</td>
        <td><LinkButton href="mailto:joaovodias@gmail.com">joaovodias@gmail.com</LinkButton></td>
    </tr>
</table>

<style>

    .stylish-table {
        font-size: 16px;
        padding-left: 12px;
        list-style: none;
        border-spacing: 6px;
    }

    i.nf {
        width: 22px;
        font-size: 22px;
        margin-right: 6px;
    }

</style>
